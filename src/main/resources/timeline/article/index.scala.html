@(atom: com.gu.contentatom.thrift.Atom
, data: com.gu.contentatom.thrift.atom.timeline.TimelineAtom
)

@import java.time.Instant
@import java.time.format.DateTimeFormatter

@fragments.atoms.html.snippet(
  atom.id,
  className = "timeline",
  label = data.typeLabel.getOrElse("Timeline"),
  headline = atom.title.getOrElse("")
){
  @for(item <- data.events) {
    <div class="atom--snippet__item">
      @defining(Instant.ofEpochSecond(item.date)) { date =>
        <time class="atom--snippet__event-date" datetime="DateTimeFormatter.ISO_LOCAL_DATE_TIME.format(date)">
          @DateTimeFormatter.ofPattern("dd EEEE yyyy").format(date)
        </time>
      }
      <div class="atom--snippet__heading"><b>@item.title</b></div>
      @item.body.map { body => @Html(body) }
    </div>
  }
}

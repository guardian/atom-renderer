@import com.gu.contentatom.thrift.ImageAsset
@(img: com.gu.contentatom.thrift.Image)

<div class="atom--snippet__image">
  @defining(img.assets.sortBy(_.dimensions.map(_.width).getOrElse(0))){ assets =>
    <img alt
      src="@assets.headOption.map(_.file).getOrElse("")"
      srcset="@assets.collect{ case ImageAsset(_, file, Some(dims), _, _) => "@file @{dims.width}w" }.mkString(",")"
      sizes="(min-width: 660px) 200px, 33%">
  }
</div>
